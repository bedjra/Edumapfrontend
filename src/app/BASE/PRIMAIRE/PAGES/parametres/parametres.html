<!-- Onglets de navigation -->
<nav class="onglets">
    <a (click)="ongletActif = 'utilisateur'" [ngClass]="{'active': ongletActif === 'utilisateur'}"
        class="nav-link">Utilisateur</a>
    <a (click)="ongletActif = 'scolarite'" [ngClass]="{'active': ongletActif === 'scolarite'}"
        class="nav-link">Scolarité</a>
    <a (click)="ongletActif = 'professeur'" [ngClass]="{'active': ongletActif === 'professeur'}"
        class="nav-link">Professeur</a>
    <a (click)="ongletActif = 'config'" [ngClass]="{'active': ongletActif === 'config'}"
        class="nav-link">Configuration</a>
</nav>

<!-- Contenu affiché selon l'onglet actif -->

<!-- Onglet Utilisateur -->
<div class="container" *ngIf="ongletActif === 'utilisateur'">
  <div class="left-box">
    <h4>Ajouter un utilisateur</h4>
    <form #formUser="ngForm" (ngSubmit)="ajouterUtilisateur()">
      <!-- Formulaire utilisateur (comme avant) -->
      <div class="form-group">
        <label for="roleUser">Rôle :</label>
        <select id="roleUser" [(ngModel)]="credentials.role" name="role" required>
          <option value="" disabled selected>Sélectionnez un rôle</option>
          <option *ngFor="let r of roles" [value]="r">{{ r | titlecase }}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="emailUser">Email :</label>
        <input type="email" id="emailUser" [(ngModel)]="credentials.email" name="email" required>
      </div>

      <div class="form-group">
        <label for="passwordUser">Mot de passe :</label>
        <input
          [type]="passwordVisible ? 'text' : 'password'"
          id="passwordUser"
          [(ngModel)]="credentials.password"
          name="password"
          required autocomplete="off"
        >
      </div>

      <div class="form-group">
        <label for="confirmPasswordUser">Confirmer le mot de passe :</label>
        <input
          [type]="passwordVisible ? 'text' : 'password'"
          id="confirmPasswordUser"
          [(ngModel)]="credentials.confirmPassword"
          name="confirmPassword"
          required autocomplete="off"
        >
      </div>

      <div class="form-group">
        <input type="checkbox" (change)="passwordVisible = !passwordVisible"> Afficher les mots de passe
      </div>

      <button
        type="submit"
        class="submit-btn"
        [disabled]="!formUser.valid || credentials.password !== credentials.confirmPassword"
      >
        S'inscrire
      </button>

      <div *ngIf="credentials.password && credentials.confirmPassword && credentials.password !== credentials.confirmPassword" style="color: red;">
        Les mots de passe ne correspondent pas.
      </div>
    </form>
  </div>

  <div class="right-box">
    <h4>Gestion des Utilisateurs</h4>
    <table *ngIf="utilisateurs.length > 0">
      <thead>
        <tr>
          <th>Id</th><th>Rôle</th><th>Email</th><th>Mot de passe</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let u of utilisateurs; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ u.role }}</td>
          <td>{{ u.email }}</td>
          <td>{{ u.password }}</td>
        </tr>
      </tbody>
    </table>
    <p *ngIf="utilisateurs.length === 0">Aucun utilisateur trouvé.</p>
  </div>
</div>

<!-- Onglet Scolarité -->
<div class="container" *ngIf="ongletActif === 'scolarite'">
  <div class="left-box">
    <h4>Ajouter une inscription</h4>
    <form #formScolarite="ngForm" (ngSubmit)="ajouterInscription()">
      <div class="form-group">
        <label for="nomEtudiant">Nom de l'étudiant :</label>
        <input type="text" id="nomEtudiant" [(ngModel)]="inscription.nom" name="nomEtudiant" required>
      </div>

      <div class="form-group">
        <label for="filiere">Filière :</label>
        <input type="text" id="filiere" [(ngModel)]="inscription.filiere" name="filiere" required>
      </div>

      <button type="submit" class="submit-btn" [disabled]="!formScolarite.valid">
        Ajouter inscription
      </button>
    </form>
  </div>

  <div class="right-box">
    <h4>Inscriptions</h4>
    <table *ngIf="inscriptions.length > 0">
      <thead>
        <tr><th>Id</th><th>Nom</th><th>Filière</th></tr>
      </thead>
      <tbody>
        <tr *ngFor="let insc of inscriptions; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ insc.nom }}</td>
          <td>{{ insc.filiere }}</td>
        </tr>
      </tbody>
    </table>
    <p *ngIf="inscriptions.length === 0">Aucune inscription trouvée.</p>
  </div>
</div>